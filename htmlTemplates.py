css = '''
<style>
.chat-message {
    padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; display: flex
}
.chat-message.user {
    background-color: #2b313e
}
.chat-message.bot {
    background-color: #475063
}
.chat-message .avatar {
  width: 20%;
}
.chat-message .avatar img {
  max-width: 78px;
  max-height: 78px;
  border-radius: 50%;
  object-fit: cover;
}
.chat-message .message {
  width: 80%;
  padding: 0 1.5rem;
  color: #fff;
}
'''

bot_template = '''
<div class="chat-message bot">
    <div class="avatar">
        <img src="data:image/jpeg;base64,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" style="max-height: 78px; max-width: 78px; border-radius: 50%; object-fit: cover;">
    </div>
    <div class="message">{{MSG}}</div>
</div>
'''

user_template = '''
<div class="chat-message user">
    <div class="avatar">
        <img src="https://media.licdn.com/dms/image/D4E35AQH8D-KhSo7qJw/profile-framedphoto-shrink_400_400/0/1715713381170?e=1719878400&v=beta&t=KM_22HMxQHOzYctf1ds7SY8digs33w8pEIef5NsVv3s">
    </div>    
    <div class="message">{{MSG}}</div>
</div>
'''